var e,t;e=this,t=function(){"use strict";function a(e){return e.replace(/([A-Z])/g,function(e){return"-"+e[0].toLowerCase()})}var e=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),n=function(){function s(){e(this,s),this._init()}return t(s,[{key:"_init",value:function(){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.width=0,this.height=0}},{key:"generateStyle",value:function(c){var l=this;return new Promise(function(e,t){for(var n=c||l.ctx.getImageData(0,0,l.width,l.height).data,i="",a=l.settings.pixelSize,r=0;r<n.length;r+=4)if(0!==n[r+3]){var o=Math.floor(r/4%l.width)*a,s=Math.floor(r/4/l.width)*a,u={red:n[r],green:n[r+1],blue:n[r+2],alpha:n[r+3]};i+=o+"px "+s+"px rgba("+u.red+", "+u.green+", "+u.blue+", "+u.alpha+"),\n    "}e({width:a+.5+"px",height:a+.5+"px",boxShadow:i.trim().slice(0,-1)})})}},{key:"convertImage",value:function(a,r){var o=this;return new Promise(function(t,n){o.settings=Object.assign({},s.defaults,r);var e=new FileReader,i=new Image;e.onload=function(e){i.onload=function(){o.canvas.width=o.width=i.width,o.canvas.height=o.height=i.height,o.width*o.height>o.settings.maxImagePixels&&(console.log("Max pixels count ("+o.settings.maxImagePixels+")"),n()),o.ctx.drawImage(i,0,0),o.generateStyle().then(function(e){return t(e)})},i.src=e.target.result},e.readAsDataURL(a)})}},{key:"applyStyle",value:function(e,t){var n,i;n=e,i=t,Object.entries(i).forEach(function(e){n.style[e[0]]=e[1]})}},{key:"parseCSS",value:function(e,t){var n=e.classList.item(0),i="";return Object.entries(t).forEach(function(e){i+="  "+a(e[0])+": "+a(e[1])+"\n"}),"."+n+" { \n"+i+" }"}}]),s}();return n.defaults={pixelSize:10,maxImagePixels:1e4},n},"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Pixelart=t();